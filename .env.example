# ArquimedesAI v2.0 Configuration Template
# Copy this file to .env and customize for your deployment
#
# This template provides DEVELOPMENT-OPTIMIZED defaults for fast iteration and testing.
# For PRODUCTION deployments, consider enabling quality features (see comments below).

# Paths
ARQ_DATA_DIR=./data
ARQ_STORAGE_DIR=./storage

# Vector Database
ARQ_DB=qdrant
# ARQ_QDRANT_URL=http://localhost:6333  # Uncomment for remote Qdrant
ARQ_QDRANT_PATH=./storage/qdrant  # Local persistence (:memory: for in-memory)

# Qdrant HNSW Optimization (v1.3.1)
# Development defaults: balanced speed/quality for testing
ARQ_QDRANT_HNSW_M=16              # Graph connectivity (4-64, higher=better accuracy+memory)
ARQ_QDRANT_HNSW_EF_CONSTRUCT=100  # Build quality (4-512, higher=better index+slower build)
ARQ_QDRANT_ON_DISK=false          # Store on disk (true=lower RAM, false=faster queries)

# Embeddings
ARQ_EMBED_MODEL=BAAI/bge-m3

# Retrieval
ARQ_TOP_K=8
ARQ_FETCH_K=50
ARQ_HYBRID=true

# Hybrid Retrieval Weights (v1.2)
ARQ_BM25_WEIGHT=0.4   # Keyword matching weight
ARQ_DENSE_WEIGHT=0.6  # Semantic similarity weight

# Cross-Encoder Reranking (v1.2)
ARQ_RERANK_ENABLED=false  # Set to true for better quality (slower)
ARQ_RERANK_MODEL=BAAI/bge-reranker-v2-m3
ARQ_RERANK_TOP_N=5    # Final results after reranking (increased for better 128K context utilization)

# Docling Configuration (v1.3)
ARQ_DOCLING_OCR=false        # Enable OCR for scanned PDFs/images (slower, set true for production)
ARQ_DOCLING_TABLE_MODE=accurate  # Table extraction: fast or accurate

# Ollama LLM
ARQ_OLLAMA_BASE=http://localhost:11434
ARQ_OLLAMA_MODEL=gemma3:latest
ARQ_OLLAMA_TEMPERATURE=0.3

# Conversational Memory (v1.4)
ARQ_ENABLE_CONVERSATION_MEMORY=false  # Set to true to enable in-session conversation history
ARQ_MAX_HISTORY_MESSAGES=20           # Message history limit for conversational mode

# Semantic Routing (v2.0)
ARQ_DISABLE_ROUTING=false  # Set to true to disable automatic domain routing (default: routing enabled)

# Structured Citations (v1.4)
ARQ_USE_STRUCTURED_CITATIONS=false  # Set to true for Pydantic schema-based citations
ARQ_CITATION_STYLE=quoted           # Options: quoted (with verbatim quotes) or id (source IDs only)

# Discord Bot
ARQ_DISCORD_TOKEN=your_discord_bot_token_here

# Development Notes:
# - Development defaults optimize for speed over quality (fast iteration, lower resources)
# - HNSW: Lower M/EF for faster queries, on_disk=false for speed
# - Reranking disabled by default (enable for production-like testing)
# - OCR disabled by default (enable for scanned PDFs)
# - Requires manual Ollama setup: ollama pull gemma3:latest
# 
# Production Optimization:
# For best quality, consider these production settings in your .env:
#   ARQ_QDRANT_HNSW_M=32              # Better accuracy
#   ARQ_QDRANT_HNSW_EF_CONSTRUCT=256  # Better index quality
#   ARQ_QDRANT_ON_DISK=true           # Lower memory usage
#   ARQ_RERANK_ENABLED=true           # Better relevance
#   ARQ_DOCLING_OCR=true              # Handle scanned documents
# 
# v2.0 Features:
# - Semantic routing: ENABLED BY DEFAULT (set ARQ_DISABLE_ROUTING=true to disable)
# - Conversational memory: Enable with ARQ_ENABLE_CONVERSATION_MEMORY=true and --conversational flag
# - Structured citations: Enable with ARQ_USE_STRUCTURED_CITATIONS=true
# - GTM domain expertise: Automatic with routing enabled
